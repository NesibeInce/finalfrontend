{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nesy/Desktop/HYF/HYF_HW/8.Final_Project/Complete_Final_Project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/nesy/Desktop/HYF/HYF_HW/8.Final_Project/Complete_Final_Project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/nesy/Desktop/HYF/HYF_HW/8.Final_Project/Complete_Final_Project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import Card from'../../shared/components/UIElements/Card';import Button from'../../shared/components/FormElements/Button';import Modal from'../../shared/components/UIElements/Modal';import Map from'../../shared/components/UIElements/Map';import ErrorModal from'../../shared/components/UIElements/ErrorModal';import LoadingSpinner from'../../shared/components/UIElements/LoadingSpinner';import{AuthContext}from'../../shared/context/auth-context';import{useHttpClient}from'../../shared/hooks/http-hook';import'./PlaceItem.css';var PlaceItem=function PlaceItem(props){var _useHttpClient=useHttpClient(),isLoading=_useHttpClient.isLoading,error=_useHttpClient.error,sendRequest=_useHttpClient.sendRequest,clearError=_useHttpClient.clearError;var auth=useContext(AuthContext);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showMap=_useState2[0],setShowMap=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showConfirmModal=_useState4[0],setShowConfirmModal=_useState4[1];var openMapHandler=function openMapHandler(){return setShowMap(true);};var closeMapHandler=function closeMapHandler(){return setShowMap(false);};var showDeleteWarningHandler=function showDeleteWarningHandler(){setShowConfirmModal(true);};var cancelDeleteHandler=function cancelDeleteHandler(){setShowConfirmModal(false);};var confirmDeleteHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setShowConfirmModal(false);_context.prev=1;_context.next=4;return sendRequest(\"/api/places/\".concat(props.id),'DELETE',null,{Authorization:'Bearer '+auth.token});case 4:props.onDelete(props.id);_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](1);case 9:case\"end\":return _context.stop();}}},_callee,null,[[1,7]]);}));return function confirmDeleteHandler(){return _ref.apply(this,arguments);};}();return React.createElement(React.Fragment,null,React.createElement(ErrorModal,{error:error,onClear:clearError}),React.createElement(Modal,{show:showMap,onCancel:closeMapHandler,header:props.address,contentClass:\"place-item__modal-content\",footerClass:\"place-item__modal-actions\",footer:React.createElement(Button,{onClick:closeMapHandler},\"CLOSE\")},React.createElement(\"div\",{className:\"map-container\"},React.createElement(Map,{center:props.coordinates,zoom:16}))),React.createElement(Modal,{show:showConfirmModal,onCancel:cancelDeleteHandler,header:\"Are you sure?\",footerClass:\"place-item__modal-actions\",footer:React.createElement(React.Fragment,null,React.createElement(Button,{inverse:true,onClick:cancelDeleteHandler},\"CANCEL\"),React.createElement(Button,{danger:true,onClick:confirmDeleteHandler},\"DELETE\"))},React.createElement(\"p\",null,\"Do you want to proceed and delete this place? Please note that it can't be undone thereafter.\")),React.createElement(\"li\",{className:\"place-item\"},React.createElement(Card,{className:\"place-item__content\"},isLoading&&React.createElement(LoadingSpinner,{asOverlay:true}),React.createElement(\"div\",{className:\"place-item__image\"},React.createElement(\"img\",{src:\"\".concat(process.env.REACT_APP_ASSET_URL,\"/\").concat(props.image),alt:props.title})),React.createElement(\"div\",{className:\"place-item__info\"},React.createElement(\"h2\",null,props.title),React.createElement(\"h3\",null,props.address),React.createElement(\"p\",null,props.description)),React.createElement(\"div\",{className:\"place-item__actions\"},React.createElement(Button,{inverse:true,onClick:openMapHandler},\"VIEW ON MAP\"),auth.userId===props.creatorId&&React.createElement(Button,{to:\"/places/\".concat(props.id)},\"EDIT\"),auth.userId===props.creatorId&&React.createElement(Button,{danger:true,onClick:showDeleteWarningHandler},\"DELETE\")))));};export default PlaceItem;","map":{"version":3,"sources":["/Users/nesy/Desktop/HYF/HYF_HW/8.Final_Project/Complete_Final_Project/frontend/src/places/components/PlaceItem.js"],"names":["React","useState","useContext","Card","Button","Modal","Map","ErrorModal","LoadingSpinner","AuthContext","useHttpClient","PlaceItem","props","isLoading","error","sendRequest","clearError","auth","showMap","setShowMap","showConfirmModal","setShowConfirmModal","openMapHandler","closeMapHandler","showDeleteWarningHandler","cancelDeleteHandler","confirmDeleteHandler","id","Authorization","token","onDelete","address","coordinates","process","env","REACT_APP_ASSET_URL","image","title","description","userId","creatorId"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\n\nimport Card from '../../shared/components/UIElements/Card';\nimport Button from '../../shared/components/FormElements/Button';\nimport Modal from '../../shared/components/UIElements/Modal';\nimport Map from '../../shared/components/UIElements/Map';\nimport ErrorModal from '../../shared/components/UIElements/ErrorModal';\nimport LoadingSpinner from '../../shared/components/UIElements/LoadingSpinner';\nimport { AuthContext } from '../../shared/context/auth-context';\nimport { useHttpClient } from '../../shared/hooks/http-hook';\nimport './PlaceItem.css';\n\nconst PlaceItem = props => {\n  const { isLoading, error, sendRequest, clearError } = useHttpClient();\n  const auth = useContext(AuthContext);\n  const [showMap, setShowMap] = useState(false);\n  const [showConfirmModal, setShowConfirmModal] = useState(false);\n\n  const openMapHandler = () => setShowMap(true);\n\n  const closeMapHandler = () => setShowMap(false);\n\n  const showDeleteWarningHandler = () => {\n    setShowConfirmModal(true);\n  };\n\n  const cancelDeleteHandler = () => {\n    setShowConfirmModal(false);\n  };\n\n  const confirmDeleteHandler = async () => {\n    setShowConfirmModal(false);\n    try {\n      await sendRequest(`/api/places/${props.id}`, 'DELETE', null, {\n        Authorization: 'Bearer ' + auth.token,\n      });\n      props.onDelete(props.id);\n    } catch (err) {}\n  };\n\n  return (\n    <React.Fragment>\n      <ErrorModal error={error} onClear={clearError} />\n      <Modal\n        show={showMap}\n        onCancel={closeMapHandler}\n        header={props.address}\n        contentClass=\"place-item__modal-content\"\n        footerClass=\"place-item__modal-actions\"\n        footer={<Button onClick={closeMapHandler}>CLOSE</Button>}\n      >\n        <div className=\"map-container\">\n          <Map center={props.coordinates} zoom={16} />\n        </div>\n      </Modal>\n      <Modal\n        show={showConfirmModal}\n        onCancel={cancelDeleteHandler}\n        header=\"Are you sure?\"\n        footerClass=\"place-item__modal-actions\"\n        footer={\n          <React.Fragment>\n            <Button inverse onClick={cancelDeleteHandler}>\n              CANCEL\n            </Button>\n            <Button danger onClick={confirmDeleteHandler}>\n              DELETE\n            </Button>\n          </React.Fragment>\n        }\n      >\n        <p>\n          Do you want to proceed and delete this place? Please note that it can't be undone\n          thereafter.\n        </p>\n      </Modal>\n      <li className=\"place-item\">\n        <Card className=\"place-item__content\">\n          {isLoading && <LoadingSpinner asOverlay />}\n          <div className=\"place-item__image\">\n            <img src={`${process.env.REACT_APP_ASSET_URL}/${props.image}`} alt={props.title} />\n          </div>\n          <div className=\"place-item__info\">\n            <h2>{props.title}</h2>\n            <h3>{props.address}</h3>\n            <p>{props.description}</p>\n          </div>\n          <div className=\"place-item__actions\">\n            <Button inverse onClick={openMapHandler}>\n              VIEW ON MAP\n            </Button>\n            {auth.userId === props.creatorId && <Button to={`/places/${props.id}`}>EDIT</Button>}\n\n            {auth.userId === props.creatorId && (\n              <Button danger onClick={showDeleteWarningHandler}>\n                DELETE\n              </Button>\n            )}\n          </div>\n        </Card>\n      </li>\n    </React.Fragment>\n  );\n};\n\nexport default PlaceItem;\n"]},"metadata":{},"sourceType":"module"}